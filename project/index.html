<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Projeto Final</title>
    <style>
        html, body {
            height: 100%;
        }
    </style>
</head>
<body>
</body>
<script src='https://d3js.org/d3.v6.min.js'></script>
<script>
    async function fetchData() {
        const response = await fetch('https://raw.githubusercontent.com/emanueles/datavis-course/master/assets/files/observable/data.json');
        const data = await response.json();

        return data;
    }
    
    const dataset = fetchData();
    
    dataset.then(data => {
        const width = 600;
        const height = 400;
        const svg = d3.select('body').append('svg').attr('width', width).attr('height', height);

        svg.selectAll('rect')
            .data(data)
            .enter()
            .append('rect')
            .attr('x', 10)
            .attr('y', (d, i) => i * 30 + 20)
            .attr('height', 20)
            .attr('width', d => d.despesa*2)
            .attr('fill', 'DarkCyan');

        svg.selectAll('text')
            .data(data)
            .enter()
            .append('text')
            .attr('x', d => d.despesa*2 + 12)
            .attr('y', (d, i) => i * 30 + 20 + 10)
            .text(d => d.despesa + ' : ' + d.categoria)
            .style('font-family', 'Arial')
            .style('font-size', '14px')
            .style('font-weight', '500')
            .attr('dominant-baseline', 'central')

        return svg.node()
    });

</script>
</html>